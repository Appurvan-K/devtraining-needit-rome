<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_fix">
    <sys_script_fix action="INSERT_OR_UPDATE">
        <before>false</before>
        <description>set all record fields to closed complete</description>
        <name>Needit_set_state_to_closed</name>
        <record_for_rollback>false</record_for_rollback>
        <script><![CDATA[update_State_To_Closed();
function update_State_To_Closed(){
	try{
		gs.info('update_State_To_Closed started');
		var count = 0; //to count more than 1 record;
		
		var gr = new GlideRecord('x_58872_needit_needit');
		gr.addEncodedQuery(); //to delete all records in needit table
		gr.query(); //executes the query
		
		while (gr.next()){
			gr.state = "3";
			gr.setWorkflow(false); //disable all business rule run after it.
			gr.autoSysFields(false); // Do not want to update its system fields like updated and updated by
			gr.update();
			count++; //increments to next record
		}
		gs.info('try completed');
	}
	catch(e){
		gs.error('ERROR in update_State_To_Closed : ' + e);
	}
}]]></script>
        <sys_class_name>sys_script_fix</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2022-01-23 06:30:17</sys_created_on>
        <sys_id>cee3ae5497d9011006b3bbc3f153af0f</sys_id>
        <sys_mod_count>4</sys_mod_count>
        <sys_name>Needit_set_state_to_closed</sys_name>
        <sys_package display_value="NeedIt" source="x_58872_needit">6ead8e780f603200cd674f8ce1050ed1</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt">6ead8e780f603200cd674f8ce1050ed1</sys_scope>
        <sys_update_name>sys_script_fix_cee3ae5497d9011006b3bbc3f153af0f</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2022-01-23 06:46:45</sys_updated_on>
        <unloadable>false</unloadable>
    </sys_script_fix>
</record_update>
